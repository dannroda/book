# Project Management

Sozo provides a complete development lifecycle for Dojo projects, from initial scaffolding to production deployment.
This page covers the essential workflows and commands that take you from idea to deployed world.

:::tip
For detailed command descriptions, use the built-in `sozo --help`.
:::

## Development Workflow Overview

Building a Dojo project follows a predictable cycle that Sozo streamlines with intelligent automation:

1. **Project Setup**: Initialize structure and configure accounts
2. **Development Cycle**: Write, build, and test your contracts iteratively
3. **Deployment**: Deploy to local/remote networks with automatic state management
4. **Updates**: Iterate with automatic diff detection and minimal migrations

### Complete Example: From Zero to Deployed

```bash
# 1. Create and set up new project
sozo init my-game
cd my-game

# 2. Set up development account (using starkli or other account tool)
# Note: Account management is handled separately from Sozo

# 3. Development cycle
sozo build                    # Compile contracts
sozo test                     # Run tests
sozo clean                    # Clean artifacts if needed

# 4. Deploy to local Katana
katana --dev --dev.no-fee &   # Start local sequencer
sozo migrate                  # Deploy world and all resources

# 5. Make changes and update
# Edit your contracts...
sozo build && sozo test       # Rebuild and test
sozo migrate                  # Automatic diff and deploy only changes

# 6. Deploy to other environments
sozo migrate --profile staging    # Deploy to testnet
sozo migrate --profile prod       # Deploy to mainnet
```

### Key Concepts

**Automatic State Management**: Sozo tracks your world's state across deployments, automatically detecting changes and generating minimal migration transactions.

**Profile-Based Configuration**: Manage multiple environments (dev, staging, prod) with separate configuration files, allowing seamless deployment across networks.

**Incremental Development**: The build-test-migrate cycle is optimized for rapid iteration, with Sozo handling the complexity of blockchain state management.

## Project Setup

### Initialize New Project

Create a new Dojo project with the standard structure and example code:

```bash
sozo init my-game                # Create project
sozo init my-game --git          # Create project + initialize git repo

# Use a custom template
sozo init my-game --template https://github.com/myorg/custom-dojo-template
sozo init my-game --template myorg/custom-dojo-template  # Short form
```

:::note
By default, this clones the [dojo-starter](https://github.com/dojoengine/dojo-starter) template, giving you a working foundation with:
- Example models (Position, Moves) and systems (Actions)
- Pre-configured Scarb.toml with Dojo dependencies
- Basic tests and deployment configuration
:::

**Account Management**: Sozo uses accounts defined in your `dojo_<profile>.toml` files.
See the [configuration guide](/framework/configuration/index.md) for more information.

:::tip
Use a tool like [starkli](https://book.starkli.rs/accounts) to create and manage accounts and keystores.
:::

## Development Cycle

The core development loop involves building, testing, and iterating on your contracts:

### Build and Compile

Compile your Cairo contracts and generate deployment artifacts:

```bash
sozo build                    # Compile all contracts
sozo build --unity            # Compile + generate Unity bindings
sozo build --typescript       # Compile + generate TypeScript bindings
```

**What it does:**
- Compiles Cairo contracts using Scarb
- Validates contract syntax and imports
- Generates Dojo manifests for deployment
- (Optional) Creates language bindings for client integration

### Test Your Logic

Run your Cairo tests to verify contract behavior:

```bash
sozo test                     # Run all tests
```

Tests are Cairo functions marked with `#[test]`.
Sozo runs them using the Cairo test runner, giving you confidence in your logic before deployment.
See the [testing guide](/framework/testing/index.md) for more information about testing your Dojo contracts.

### Clean Build Artifacts

Remove stale build files when needed:

```bash
sozo clean                    # Clean current profile manifest files
sozo clean --all-profiles     # Clean all profile manifest files
```

**When to clean:**
- After major contract restructuring
- When build artifacts seem corrupted
- Before important deployments to ensure fresh state

**What gets cleaned:**
- Manifest files for the current profile (or all profiles with `--all-profiles`)
- Generated metadata and artifacts
- Does NOT clean Scarb's `target/` directory (use `scarb clean` for that)

### Generate Bindings

Create client bindings for various platforms after building:

```bash
sozo bindgen                  # Generate all configured bindings
sozo bindgen --typescript     # Generate TypeScript bindings only
sozo bindgen --unity          # Generate Unity bindings only
```

Bindgen reads from your build artifacts to create platform-specific client code for interacting with your world.


## Deployment and Updates

Sozo's migration system is the heart of Dojo deployment, automatically handling the complex process of deploying and updating worlds.

### Deploy Your World

Deploy your world for the first time or update existing deployments:

```bash
# First deployment to local Katana
katana --dev --dev.no-fee &   # Start local sequencer
sozo migrate                  # Deploy world and all resources

# Deploy to testnet (requires profile configuration)
sozo migrate --profile staging

# Deploy to mainnet
sozo migrate --profile prod
```

### How Migration Works

**Automatic Diff Analysis**: Sozo compares your local world state against the deployed state, identifying exactly what has changed:
- New or modified models, systems, events, libraries
- Updated class hashes and resource registrations
- Permission changes (writers and owners)

**Intelligent Updates**: Instead of redeploying everything, Sozo generates minimal migration transactions:
- Declares only new or changed classes
- Updates only modified resources
- Applies permission changes incrementally
- Initializes new contracts as needed

**Multi-Environment Management**: Each profile tracks its own deployment state:
```bash
sozo migrate                    # Uses 'dev' profile (local Katana)
sozo migrate --profile staging  # Uses 'staging' profile (testnet)
sozo migrate --profile prod     # Uses 'prod' profile (mainnet)
```

### Configuration for Updates

For subsequent deployments, record the world address in your profile:

```toml
[env]
world_address = "0x06171ed98331e849d6084bf2b3e3186a7ddf35574dd68cab4691053ee8ab69d7"
rpc_url = "https://starknet-sepolia.public.blastapi.io/rpc/v0_7"
account_address = "0x..."
private_key = "0x..."
```

This tells Sozo to update the existing world rather than deploy a new one.

## Multi-Environment Workflows

### Local Development

```bash
# Standard local development flow
katana --dev --dev.no-fee &      # Start local sequencer
sozo build && sozo test          # Build and test
sozo migrate                     # Deploy to local Katana

# Test your world...
# Update your contracts...

sozo migrate                     # Deploy any changes (automatic diff)
```

### Remote Deployment

```bash
# Final validation before production
sozo build && sozo test
sozo clean && sozo build         # Clean build for production

# Deploy to mainnet
sozo migrate --profile prod
```

## Development Utilities

### Hash Management

Debug and verify resource deployments:

```bash
# Compute hash for a resource
sozo hash compute Position         # Get hash for Position model
sozo hash compute Actions          # Get hash for Actions system

# Find resource by hash
sozo hash find 0x1234... --namespaces ns --resources Position,Actions
```

### Contract Verification

Verify your contracts on Walnut for debugging:

```bash
sozo walnut verify                # Verify all contracts on Walnut
```

This uploads your contract source and ABIs to [Walnut](https://walnut.dev) for debugging and inspection.

:::note
The `walnut` command requires Sozo to be built with the feature enabled.
If you see "unrecognized subcommand," rebuild from source using `cargo build --features walnut`.
:::
